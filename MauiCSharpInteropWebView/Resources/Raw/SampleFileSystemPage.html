<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="_hwv/HybridWebView.js"></script>
    <link href="styles/my-styles.css" rel="stylesheet" />
</head>
<body>
    <h1>HybridWebView demo: Local File system page</h1>
    <div>
        This web page is loaded from the local file system (FileSystem.Current.AppDataDirectory). 
        It can access resources from in the same way as normal via the HybridAssetRoot and other embedded resources. 
        Native/JS communication works as expected. The proxy can be further leveraged to reference
        local file system files within the web pages (e.g. images). This is useful when you have resources that have 
        been downloaded and saved to the file system (app data directory).

        <p>
            <button type="button" onclick="invokeDotNetFibonacciMethod()">Invoke .NET Fibonacci method</button>
            <br /><br />
            <textarea id="logArea" style="width:100%" rows="10"></textarea>
        </p>

        <p>
            The following image is via the local file system use the proxy:
            <br />
            <br />
            <img src="proxy?operation=loadFromFileSystem&fileName=SampleFileSystemImage.png" />
        </p>
    </div>

    <script>
        async function invokeDotNetFibonacciMethod() {
            var log = document.getElementById('logArea');

            var fibNumber = Math.round(Math.random() * 30) + 1;
            log.value += `Calling .NET Fibonacci method with value: ${fibNumber}\n`;

            var r = await HybridWebView.SendInvokeMessageToDotNetAsync('Fibonacci', [fibNumber]);
            log.value += `C# Fibonacci result for ${fibNumber}: ${r}\n`;
        }
    </script>
</body>
</html>
